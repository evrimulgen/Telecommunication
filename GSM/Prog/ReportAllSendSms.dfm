inherited ReportAllSendSmsFrm: TReportAllSendSmsFrm
  Caption = #1046#1091#1088#1085#1072#1083' '#1086#1090#1087#1088#1072#1074#1083#1077#1085#1085#1099#1093' '#1089#1084#1089
  ClientHeight = 544
  ClientWidth = 931
  Position = poScreenCenter
  ExplicitWidth = 947
  ExplicitHeight = 582
  PixelsPerInch = 96
  TextHeight = 13
  inherited pButtons: TPanel
    Width = 931
    Height = 81
    ExplicitWidth = 931
    ExplicitHeight = 81
    object Label1: TLabel [0]
      Left = 17
      Top = 14
      Width = 56
      Height = 13
      Caption = #1055#1077#1088#1080#1086#1076' '#1089
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'MS Sans Serif'
      Font.Style = [fsBold]
      ParentFont = False
    end
    object Label2: TLabel [1]
      Left = 180
      Top = 14
      Width = 15
      Height = 13
      Caption = #1087#1086
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'MS Sans Serif'
      Font.Style = [fsBold]
      ParentFont = False
    end
    inherited btRefresh: TBitBtn
      Left = 313
      Top = 7
      ExplicitLeft = 313
      ExplicitTop = 7
    end
    inherited btLoadInExcel: TBitBtn
      Left = 424
      Top = 7
      ExplicitLeft = 424
      ExplicitTop = 7
    end
    object dtFrom: TDateTimePicker
      Left = 79
      Top = 15
      Width = 95
      Height = 21
      Date = 41904.632102939810000000
      Time = 41904.632102939810000000
      TabOrder = 2
    end
    object dtTo: TDateTimePicker
      Left = 201
      Top = 15
      Width = 95
      Height = 21
      Date = 41904.632102939810000000
      Time = 41904.632102939810000000
      TabOrder = 3
    end
    object BitBtn1: TBitBtn
      Left = 565
      Top = 7
      Width = 111
      Height = 29
      Action = aShowUserStatInfo
      Caption = #1055#1086#1076#1088#1086#1073#1085#1086
      Glyph.Data = {
        36090000424D3609000000000000360000002800000018000000180000000100
        2000000000000009000000000000000000000000000000000000FF00FF00FF00
        FF00FFFFFF00F7F7F700EFEFEF00EFEFEF00E7E7E700E7E7E700DEDEDE00DEDE
        DE00DEDEDE00DEDEDE00DEDEDE00DEDEDE00DEDEDE00DEDEDE00E7E7E700E7E7
        E700EFEFEF00EFEFEF00F7F7F700FFFFFF00FF00FF00FF00FF00FF00FF00FF00
        FF00E7E7E700CECECE00BDBDBD00B5B5AD00ADA58C00B59C7300B59C6300BD94
        5200BD944A00BD944A00BD944A00BD944A00B5945A00B59C6300AD9C7B00ADAD
        A500ADB5B500BDBDBD00CECECE00EFEFEF00FF00FF00FF00FF00FF00FF00FF00
        FF00FFFFFF00E7DED600C6AD7B00B58C3900B58C3900BD944200BD944200BD94
        4200C69C4A00C69C4A00C69C4A00C69C4A00BD944200BD944200BD9442005A8C
        8C00008CDE00A5C6D600FFFFFF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00CEB58400AD843100B58C3900B58C3900BD944200BD944200C69C4A00C69C
        4A00C69C4A00C69C4A00C69C4A00C69C4A00C69C4A00C69C4A00BD9442005294
        9C00008CE7005A8C8400BD9C5A00F7EFDE00FF00FF00FF00FF00FF00FF00FF00
        FF00BD9C5A00AD8C3900B58C3900BD944200BD944200C69C4A00C69C4A00CE9C
        4A00CEA55200CEA55200CEA55200CEA55200CE9C4A00C69C4A00C69C4200BD94
        4A0084946B00B58C3900AD8C3900CEAD7B00FF00FF00FF00FF00FF00FF00FF00
        FF00CEB58400B58C3900B58C3900BD944200BD944200C69C4A00CE9C4A00CEA5
        5200CEA55200D6A55200D6A55200CEA55200CEA55200CE9C4A00C69C4A006B9C
        9400009CE7008C946300B58C3900CEB57B00FF00FF00FF00FF00FF00FF00FF00
        FF00F7EFDE00B58C3900B58C3900BD944200C69C4200C69C4A00CEA55200CEA5
        5200D6A55200D6AD5A00D6AD5A00D6A55200CEA55200CEA55200C69C4A00639C
        9400009CEF00429CA500B58C3900E7DEC600FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00E7D6B500BD944A00BD944200C69C4A00C69C4A00CEA55200D6A5
        5200D6AD5A00DEAD5A00DEAD5A00D6AD5A00D6A55200CEA55200C69C4A00AD9C
        5A0008A5E70000A5EF006BB5C600FFFFFF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00EFE7CE00C6A56300C69C4A00C69C4A00CEA55200D6AD
        5A00E7BD7B00EFCE8400EFCE8400E7BD7300D6AD5A00CEA55200C69C4A00C69C
        4A009CA57B0018ADEF0000A5F7006BCEF700FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FFFFF700DEC69C00CEA55200E7C67B00FFD6
        9C00FFD69C00EFD6A500EFD6A500FFD69C00F7D69C0042ADC6007BA58C00D6C6
        9400F7F7EF00DEF7FF0008B5F70000ADF700CEEFFF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FFF7EF00FFE7B500DED6
        C600C6DEEF00C6DEF700C6DEF700C6DEEF00ADCED60008B5F70018B5F700FFFF
        FF00FF00FF00FF00FF0031C6FF0000B5F700B5E7FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FFFFFF00C6DE
        F700BDDEF700BDDEF700BDDEF700BDDEF700CEEFFF004ACEFF0000B5FF0052CE
        FF00BDEFFF007BDEFF0000B5FF0018BDFF00E7FFFF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00E7EF
        FF00B5D6F700D6E7F700CEE7F700B5D6F700FFFFFF00E7F7FF0052CEFF0010BD
        FF0000BDFF0008BDFF0031C6FF00BDEFFF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00EFF7
        FF00DEEFF700DEEFFF00DEEFFF00DEEFF700FFFFFF00FF00FF00FFFFFF00D6F7
        FF00C6EFFF00CEF7FF00F7FFFF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FFFFFF00D6E7
        F700CEE7F700CEE7F700CEE7F700CEE7F700D6E7F700FFFFFF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00E7F7FF00C6DE
        F700C6DEF700C6DEF700C6DEF700C6DEF700C6DEF700E7EFEF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00B5CEE700B5D6
        F700B5D6F700B5D6F700B5D6F700B5D6F700B5D6F7008494AD00FFFFFF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00D6D6DE0094B5DE00A5CE
        EF00A5CEEF00A5CEEF00A5CEEF00A5CEEF00A5CEEF00637B9400BDC6CE00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF008C9CAD0084ADD60094C6
        EF0094C6EF0094C6EF0094C6EF0094C6EF0094BDE700394A6B0084849400FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF006B738C0052739C0084BD
        E7008CBDEF007BADD6005A7B9C00526B8C00394A630029314A005A6B7B00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF007384940031426300425A
        7B006384AD0031425A0029394A0029394A0029394A0029394A00636B7B00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00C6CED600314263002939
        520029314A0029395200293952002939520029395200293952009CA5AD00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00ADB5BD003942
        5A0029314A002939520029395200293952003139520084849400FFFFFF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00E7E7
        EF009C9CAD006B738400636B7B00848C9400CED6D600FF00FF00FF00FF00FF00
        FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00}
      ParentShowHint = False
      ShowHint = True
      TabOrder = 4
    end
    object cbSearch: TCheckBox
      Left = 702
      Top = 13
      Width = 60
      Height = 17
      Caption = #1055#1086#1080#1089#1082
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'MS Sans Serif'
      Font.Style = [fsBold]
      ParentFont = False
      TabOrder = 5
      OnClick = cbSearchClick
    end
  end
  inherited pGrid: TPanel
    Top = 81
    Width = 931
    Height = 463
    ExplicitTop = 81
    ExplicitWidth = 931
    ExplicitHeight = 463
    inherited gReport: TCRDBGrid
      Width = 929
      Height = 461
    end
    object qReportGR: TCRDBGrid
      Left = 1
      Top = 1
      Width = 929
      Height = 461
      Align = alClient
      DataSource = dsReport
      TabOrder = 1
      TitleFont.Charset = DEFAULT_CHARSET
      TitleFont.Color = clWindowText
      TitleFont.Height = -11
      TitleFont.Name = 'Tahoma'
      TitleFont.Style = []
      Columns = <
        item
          Expanded = False
          FieldName = 'PHONE_NUMBER'
          Title.Alignment = taCenter
          Title.Caption = #1053#1086#1084#1077#1088' '#1090#1077#1083#1077#1092#1086#1085#1072
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'Tahoma'
          Title.Font.Style = [fsBold]
          Width = 134
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'SMS_TEXT'
          Title.Alignment = taCenter
          Title.Caption = #1058#1077#1082#1089#1090' '#1089#1086#1086#1073#1097#1077#1085#1080#1103
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'Tahoma'
          Title.Font.Style = [fsBold]
          Width = 352
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'DATE_SEND'
          Title.Alignment = taCenter
          Title.Caption = #1044#1072#1090#1072' '#1086#1090#1087#1088#1072#1074#1082#1080
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'Tahoma'
          Title.Font.Style = [fsBold]
          Width = 152
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'PROV'
          Title.Alignment = taCenter
          Title.Caption = #1063#1077#1088#1077#1079' '#1095#1090#1086' '#1086#1090#1087#1088#1072#1074#1083#1077#1085#1086
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'Tahoma'
          Title.Font.Style = [fsBold]
          Width = 169
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'STATUS'
          Title.Alignment = taCenter
          Title.Caption = #1057#1090#1072#1090#1091#1089
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'Tahoma'
          Title.Font.Style = [fsBold]
          Width = 322
          Visible = True
        end>
    end
  end
  inherited qReport: TOraQuery
    SQL.Strings = (
      'with'
      'l as (select'
      '        phone_number,'
      '        sms_text,'
      '        date_send,'
      '        -1 status_code'
      '      from'
      '        log_send_sms '
      '      where'
      '        trunc(date_send) >= trunc(:DATE_BEGIN)'
      '        and trunc(date_send) <= trunc(:DATE_END)'
      '     ),'
      's as (select'
      '        phone,'
      '        message,'
      '        date_start,'
      '        status,'
      '        -1 status_code'
      '      from'
      '        sms_log '
      '      where'
      '        trunc(date_start) >= trunc(:DATE_BEGIN)'
      '        and trunc(date_start) <= trunc(:DATE_END)'
      '    ),'
      'sms_qurr as (select'
      '        phone,'
      '        message,'
      '        date_start,'
      '        '#39#1042' '#1086#1095#1077#1088#1077#1076#1080' '#1085#1072' '#1086#1090#1087#1088#1072#1074#1082#1091#39' status,'
      '        status_code'
      '      from'
      '        SMS_CURRENT'
      '      where'
      '        trunc(date_start) >= trunc(:DATE_BEGIN)'
      '        and trunc(date_start) <= trunc(:DATE_END)'
      '    )    '
      'select '
      
        '      distinct nvl(nvl(l.phone_number, s.phone), sms_qurr.phone)' +
        '  phone_number,'
      
        '      nvl(nvl(l.sms_text, s.message), sms_qurr.message) sms_text' +
        ','
      '      nvl(l.date_send, s.date_start) date_send,'
      '      sms_qurr.status_code,'
      '      case nvl(sms_qurr.status, nvl(s.status, '#39'-'#39')) '
      '        when '#39#1042' '#1086#1095#1077#1088#1077#1076#1080' '#1085#1072' '#1086#1090#1087#1088#1072#1074#1082#1091#39' then'
      '          case sms_qurr.status_code'
      '            when 0 then'
      '              '#39#1054#1090#1087#1088#1072#1074#1083#1077#1085#1086'. '#1055#1086#1083#1091#1095#1077#1085#1080#1077' '#1089#1090#1072#1090#1091#1089#1072#39
      '          else'
      '            sms_qurr.status'
      '          end'
      '        when '#39'DELIVERED'#39' then'
      '          '#39#1044#1086#1089#1090#1072#1074#1083#1077#1085#1086' '#1095#1077#1088#1077#1079' '#1096#1083#1102#1079#39' '
      '        when '#39'UNDELIVERABLE'#39' then'
      '          '#39#1053#1077' '#1076#1086#1089#1090#1072#1074#1083#1077#1085#1086#39
      '        when '#39'Max request count:'#39' then'
      '          '#39#1052#1072#1082#1089#1080#1084#1072#1083#1100#1085#1086#1077' '#1082#1086#1083'-'#1074#1086' '#1079#1072#1087#1088#1086#1089#1086#1074#39'    '
      '        when'#39'EXPIRED'#39' then'
      '          '#39#1048#1089#1090#1077#1082#1083#1086' '#1074#1088#1077#1084#1103#39
      '        when '#39'BEELINE_SMPP Error'#39' then'
      '          '#39#1054#1096#1080#1073#1082#1072' '#1041#1080#1083#1072#1081#1085' SMPP'#39
      '        when '#39'-'#39' then'
      '          '#39#39'         '
      '        else'
      '          '#39#1054#1096#1080#1073#1082#1072#39
      '      end as status,'
      '       '
      '       case sms_qurr.status'
      '        when '#39#1042' '#1086#1095#1077#1088#1077#1076#1080' '#1085#1072' '#1086#1090#1087#1088#1072#1074#1082#1091#39' then'
      '          '#39#1064#1083#1102#1079#39
      '       else case '
      '         when (s.phone is null) then'
      '            '#39#1055#1088#1086#1074#1072#1081#1076#1077#1088#39
      '         else'
      '          '#39#1064#1083#1102#1079#39'  '
      '         end'
      '       end prov'
      'from l'
      '  full join s on l.phone_number = s.phone'
      '                  and l.sms_text = s.message'
      
        '                  and TRUNC(l.date_send, '#39'mi'#39') = TRUNC(s.date_st' +
        'art, '#39'mi'#39')'
      ' full join sms_qurr on l.phone_number = sms_qurr.phone'
      '                  and l.sms_text = sms_qurr.message'
      
        '                  and TRUNC(l.date_send, '#39'mi'#39') = TRUNC(sms_qurr.' +
        'date_start, '#39'mi'#39')'
      '                  '
      'order by date_send desc, phone_number'
      ''
      '-- -1 row(s) affected.')
    Top = 160
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'DATE_BEGIN'
      end
      item
        DataType = ftUnknown
        Name = 'DATE_END'
      end>
    object qReportPHONE_NUMBER: TStringField
      FieldName = 'PHONE_NUMBER'
      Size = 40
    end
    object qReportSMS_TEXT: TStringField
      FieldName = 'SMS_TEXT'
      Size = 1400
    end
    object qReportDATE_SEND: TDateTimeField
      FieldName = 'DATE_SEND'
    end
    object qReportPROV: TStringField
      FieldName = 'PROV'
      Size = 18
    end
    object STATUS: TStringField
      FieldName = 'STATUS'
      Size = 53
    end
  end
  inherited dsReport: TDataSource
    Top = 160
  end
  inherited aList: TActionList
    Top = 160
    object aShowUserStatInfo: TAction
      Caption = 'aShowUserStatInfo'
      OnExecute = aShowUserStatInfoExecute
    end
  end
end
