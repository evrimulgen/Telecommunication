
   CREATE JAVA SOURCE NAMED "CORP_MOBILE"."SFTP" AS 
 import  com.jcraft.jsch.*;import  java.io.*;import  java.io.IOException;import  java.io.StringWriter;import  java.io.PrintWriter;public class  Sftp  {    public static void  main()  {    }    public static String  sftpcmd   (        String  p_username,        String  p_password,        String  p_host,        String  p_local_file,        String  p_remote_file,        String  p_cmd    )  {        boolean  l_disconectChannel = false;        boolean  l_disconectSession = false;        StringWriter  sw;        PrintWriter  pw;        JSch  jsch = null;        Session  session = null;        Channel  channel = null;        ChannelSftp  ch = null;        try  {            jsch = new  JSch();            session = jsch.getSession( p_username, p_host, 22 );            session.setTimeout( 30 * 1000 );                    // 30 seconds            session.setPassword( p_password );            java.util.Properties config = new  java.util.Properties();            config.put( "StrictHostKeyChecking", "no" );            session.setConfig( config );            session.setDaemonThread( true );            session.connect();            l_disconectSession = true;            channel = session.openChannel( "sftp" );            channel.connect();            l_disconectChannel = true;            ch = (ChannelSftp)channel;            int  mode = ChannelSftp.OVERWRITE;            if   (p_cmd.equals( "get" ))  {                ch.get( p_remote_file, p_local_file );            }            if   (p_cmd.equals( "put" ))  {                ch.put( p_local_file, p_remote_file, mode );            }            if   (l_disconectChannel)                ch.disconnect();            if   (l_disconectSession)                session.disconnect();        }        catch  (Exception  e)  {            if   (l_disconectChannel)                ch.disconnect();            if   (l_disconectSession )                session.disconnect();            e.printStackTrace();            sw = new  StringWriter();            pw = new  PrintWriter( sw );            e.printStackTrace( pw );            return( "Java Error: " + sw.toString() );        }        return( null );    }}