
  CREATE OR REPLACE TRIGGER "CORP_MOBILE"."TI_HOT_BILLING_FILES" 
--#Version=2
--v.2 Афросин Добавил DATE_INSERT_FILE_NAME
  BEFORE INSERT ON Hot_Billing_Files FOR EACH ROW
BEGIN
    :NEW.hbf_id := S_NEW_HBF_ID.Nextval;
    :NEW.DATE_INSERT_FILE_NAME := SYSDATE;
  BEGIN
    :NEW.YEAR_MONTH:=TO_NUMBER(SUBSTR(:NEW.FILE_NAME, 11, 6));
  EXCEPTION
    WHEN OTHERS THEN
      :NEW.YEAR_MONTH:=NULL;
  END;  
  if :new.FILE_ROW_COUNT is null then
    :new.FILE_ROW_COUNT:=0;
  end if;
END; 
ALTER TRIGGER "CORP_MOBILE"."TI_HOT_BILLING_FILES" ENABLE