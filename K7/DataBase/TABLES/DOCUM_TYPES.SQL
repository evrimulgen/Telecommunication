CREATE TABLE DOCUM_TYPES
(
  DOCUM_TYPE_ID      INTEGER                    NOT NULL,
  DOCUM_TYPE_NAME    VARCHAR2(100 CHAR),
  USER_CREATED       VARCHAR2(30 CHAR),
  DATE_CREATED       DATE,
  USER_LAST_UPDATED  VARCHAR2(30 CHAR),
  DATE_LAST_UPDATED  DATE
);

COMMENT ON TABLE DOCUM_TYPES IS 'Типы документов';

COMMENT ON COLUMN DOCUM_TYPES.DOCUM_TYPE_ID IS 'Первичный ключ';

COMMENT ON COLUMN DOCUM_TYPES.DOCUM_TYPE_NAME IS 'Наименование ';

COMMENT ON COLUMN DOCUM_TYPES.USER_CREATED IS 'Пользователь, создавший запись';

COMMENT ON COLUMN DOCUM_TYPES.DATE_CREATED IS 'Дата/время создания записи';

COMMENT ON COLUMN DOCUM_TYPES.USER_LAST_UPDATED IS 'Пользователь, редактировавший запись последним';

COMMENT ON COLUMN DOCUM_TYPES.DATE_LAST_UPDATED IS 'Дата/время последней редакции записи';



CREATE UNIQUE INDEX PK_DOCUM_TYPES ON DOCUM_TYPES(DOCUM_TYPE_ID);


CREATE OR REPLACE TRIGGER TIU_DOCUM_TYPES
--#Version=1
  BEFORE INSERT OR UPDATE ON DOCUM_TYPES FOR EACH ROW
BEGIN
  IF INSERTING THEN
    IF NVL(:NEW.DOCUM_TYPE_ID, 0) = 0 then
      :NEW.DOCUM_TYPE_ID := NEW_DOCUM_TYPE_ID;
    END IF;
    :NEW.USER_CREATED := USER;
    :NEW.DATE_CREATED := SYSDATE;
  END IF;
  :NEW.USER_LAST_UPDATED := USER;
  :NEW.DATE_LAST_UPDATED := SYSDATE;
END;
/


ALTER TABLE DOCUM_TYPES ADD (
  CONSTRAINT PK_DOCUM_TYPES
  PRIMARY KEY
  (DOCUM_TYPE_ID)
  USING INDEX PK_DOCUM_TYPES
  ENABLE VALIDATE);

GRANT DELETE, INSERT, SELECT, UPDATE ON DOCUM_TYPES TO CORP_MOBILE_ROLE;

GRANT SELECT ON DOCUM_TYPES TO CORP_MOBILE_ROLE_RO;

Insert into DOCUM_TYPES (DOCUM_TYPE_ID, DOCUM_TYPE_NAME)
Values (1, 'Договора аренды номера');
Insert into DOCUM_TYPES (DOCUM_TYPE_ID, DOCUM_TYPE_NAME)
Values (2, 'Заявление об утере Сим-карты');
Insert into DOCUM_TYPES (DOCUM_TYPE_ID, DOCUM_TYPE_NAME)
Values (3, 'Заявление о смене номера телефона');
Insert into DOCUM_TYPES (DOCUM_TYPE_ID, DOCUM_TYPE_NAME)
Values (4, 'Заявление на смену тарифного плана');
Insert into DOCUM_TYPES (DOCUM_TYPE_ID, DOCUM_TYPE_NAME)
Values (5, 'Заявления на расторжение договора');
Insert into DOCUM_TYPES (DOCUM_TYPE_ID, DOCUM_TYPE_NAME)
Values (6, 'USSD: Заявление на смену тарифного плана');
Insert into DOCUM_TYPES (DOCUM_TYPE_ID, DOCUM_TYPE_NAME)
Values (0, 'Оплата');
COMMIT;

