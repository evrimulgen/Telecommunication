--#if not TableExists("MASK_BEAUTY") then
CREATE TABLE MASK_BEAUTY
(
  MASK_BEAUTY_ID  INTEGER NOT NULL,
  PATTERN  VARCHAR2(300) NOT NULL,
  USER_CREATED    VARCHAR2(30 CHAR) NOT NULL,
  DATE_CREATED    DATE NOT NULL,
  USER_LAST_UPDATED  VARCHAR2(30 CHAR),
  DATE_LAST_UPDATED  DATE

)
TABLESPACE USERS;
--#end if

--#if GetTableComment("MASK_BEAUTY")<>"Маска номера" then
COMMENT ON TABLE MASK_BEAUTY IS 'Маска номера';
--#end if

--#if GetColumnComment("MASK_BEAUTY.PATTERN") <> "Образ маски" then
COMMENT ON COLUMN MASK_BEAUTY.PATTERN IS 'Образ маски';
--#end if

--#if GetColumnComment("MASK_BEAUTY.USER_CREATED") <> "Пользователь, создавший запись" then
COMMENT ON COLUMN MASK_BEAUTY.USER_CREATED IS 'Пользователь, создавший запись';
--#end if

--#if GetColumnComment("MASK_BEAUTY.DATE_CREATED") <> "Дата создания записи" then
COMMENT ON COLUMN MASK_BEAUTY.DATE_CREATED IS 'Дата создания записи';
--#end if

--#if GetColumnComment("MASK_BEAUTY.USER_LAST_UPDATED") <> "Пользователь, редактировавший запись последним" then
COMMENT ON COLUMN MASK_BEAUTY.USER_LAST_UPDATED IS 'Пользователь, редактировавший запись последним';
--#end if

--#if GetColumnComment("MASK_BEAUTY.DATE_LAST_UPDATED") <> "Дата последней редакции записи" then
COMMENT ON COLUMN MASK_BEAUTY.DATE_LAST_UPDATED IS 'Дата последней редакции записи';
--#end if

CREATE SEQUENCE S_NEW_MASK_BEAUTY_ID
  START WITH 1
  MAXVALUE 999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  NOCACHE
  ORDER;
  

CREATE OR REPLACE FUNCTION NEW_MASK_BEAUTY_ID RETURN NUMBER IS
--#Version=1
  vRES NUMBER;
BEGIN
  SELECT S_NEW_MASK_BEAUTY_ID.NEXTVAL
    INTO vRES
    FROM DUAL;
  RETURN vRES;
END;

CREATE OR REPLACE TRIGGER TIU_MASK_BEAUTY
  BEFORE INSERT OR UPDATE ON MASK_BEAUTY FOR EACH ROW
BEGIN
  IF INSERTING THEN
    IF NVL(:NEW.MASK_BEAUTY_ID, 0) = 0 THEN
      :NEW.MASK_BEAUTY_ID := NEW_MASK_BEAUTY_ID;
    END IF;
    :NEW.USER_CREATED := USER;
    :NEW.DATE_CREATED := SYSDATE;
  END IF;
  :NEW.USER_LAST_UPDATED := USER;
  :NEW.DATE_LAST_UPDATED := SYSDATE;
END;


--GRANT DELETE, INSERT, SELECT, UPDATE ON MASK_BEAUTY TO CORP_MOBILE_ROLE;
--GRANT DELETE, INSERT, SELECT, UPDATE ON MASK_BEAUTY ТO LONTANA;
--GRANT DELETE, INSERT, SELECT, UPDATE ON MASK_BEAUTY TO SIM_TRADE;
--GRANT SELECT ON MASK_BEAUTY TO CORP_MOBILE_ROLE_RO;
