inherited RefContractGroupsForm: TRefContractGroupsForm
  Caption = #1043#1088#1091#1087#1087#1099' '#1076#1086#1075#1086#1074#1086#1088#1086#1074
  ClientHeight = 325
  ClientWidth = 810
  OnCreate = FormCreate
  ExplicitWidth = 818
  ExplicitHeight = 352
  PixelsPerInch = 96
  TextHeight = 13
  inherited Panel1: TPanel
    Width = 810
    Height = 42
    Margins.Left = 4
    Margins.Top = 4
    Margins.Right = 4
    Margins.Bottom = 4
    ExplicitWidth = 810
    ExplicitHeight = 42
    inherited ToolBar1: TToolBar
      Width = 810
      Height = 42
      Align = alClient
      ButtonHeight = 42
      ExplicitWidth = 810
      ExplicitHeight = 42
      inherited ToolButton1: TToolButton
        ExplicitHeight = 42
      end
      inherited ToolButton2: TToolButton
        ExplicitHeight = 42
      end
      inherited ToolButton3: TToolButton
        ExplicitHeight = 42
      end
      inherited ToolButton7: TToolButton
        ExplicitHeight = 42
      end
      inherited ToolButton4: TToolButton
        ExplicitHeight = 42
      end
      inherited ToolButton5: TToolButton
        ExplicitHeight = 42
      end
      inherited ToolButton8: TToolButton
        ExplicitHeight = 42
      end
      inherited ToolButton6: TToolButton
        ExplicitHeight = 42
      end
      object ToolButton9: TToolButton
        Left = 202
        Top = 0
        Width = 8
        Caption = 'ToolButton9'
        ImageIndex = 10
        Style = tbsSeparator
      end
      object BitBtn1: TBitBtn
        Left = 210
        Top = 0
        Width = 159
        Height = 42
        Action = aShowGroupStat
        Caption = #1048#1085#1092#1086#1088#1084#1072#1094#1080#1103' '#1086' '#1075#1088#1091#1087#1087#1077
        Glyph.Data = {
          36090000424D3609000000000000360000002800000018000000180000000100
          2000000000000009000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          000000000000000000000000000000000000000000000600A8AD0704B5F40A06
          BEFF0A06BCFF0D09D5FF0D09D3FF0C08CBFF0A07C1FF0A07C4FF0804AECA0804
          B5970B06BB100000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000702BB744243EDFF191DFDFF1B20
          FBFF1B20FAFF1B1FF9FF1B1FF9FF1B1FF9FF1B20FAFF1B20FBFF1B20FDFF171A
          EDFF0A06C5D80000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000601C8826D76F3FF1A2CF8FF2032
          F7FF2032F7FF2032F7FF2032F7FF2032F7FF2032F7FF2032F7FF2032F7FF2237
          FDFF0001E3CD0000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000702D471717CF4FF2C49F8FF2641
          F8FF2641F8FF243BF8FF1F35F7FF2339F8FF2641F8FF2642F8FF2843F9FF2032
          F8FF1209CA95B259072CA551160D000000000000000000000000000000000000
          0000000000000000000000000000000000000C05E1214546EDFF658AFAFF2C4D
          F8FF2F4BF8FF4B91FAFFA3FFFCFF60BCFBFF2E47F8FF3254F8FF345AFAFF0D15
          FEFFA35C36FFCC7A16FFC0711CFFB8681CFFAC591DCEB2601F53000000000000
          000000000000000000000000000000000000000000000F00F8C29DA7FFFF6484
          FEFF3E78FBFF61E3FFFF5DDAFFFF62E3FFFF4DA6FEFF4063FAFF3351FFFF2312
          D9FFF3B01CFFE2A32CFFE1A32CFFE2A42CFFE1A32DFFC67A27FF266823092766
          226E276421BC266220CC26601ECC2D822CCC319924C8256017CB1519C7FF586F
          CDFF4EA9FFFF4093E7FF2C68D8FF124ECAFF2B8DF2FF2D3DF6FF0103ECFFEEAB
          4BFFEAB142FFE5AD46FFE5AD46FFE5AD46FFE8B048FFCE8631FF4F8F4BFF34B0
          4AFF40CD60FF44D96CFF44D86CFF43D66BFF45DC69FF288172FF102771FF0B24
          65FF3160B3FF56C4FFFF2DAFFFFF2EADFFFF1953C3FF0D2150FF02225AFF9A81
          58FFF1C156FFEABA57FFEABA57FFEABB57FFEDC15BFFCE8932F36EB473FF55DD
          84FF3DD16AFF3FD06BFF3FD06BFF3FD06BFF40D26AFF3BCD6DFF152F81FF1026
          73FF55B3F1FF38BAFFFF3CBAFDFF3EBCFEFF40C3FFFF0D1F5FFF001D6AFFB697
          67FFF6CA69FFEFC46AFFEDC46BFFEEC56CFFE9BB5EFFD48E3599569F56F57EE6
          ADFF37D06EFF3DD172FF3DD173FF3DD173FF3DD173FF40DA72FF298C7DFF0B22
          7AFF99ECFFFF54CCFEFF46C8FEFF49C8FEFF52D6FFFF133E93FF817D79FFFFDC
          9EFFE6C086FFFFD773FFF7D17AFFF3D07CFFE1A644FFDC9C3E042F853274A1E3
          BCFF40D78AFF36D27BFF39D37FFF39D37FFF39D37FFF3ADA7DFF278A88FF2046
          A1FFB4F4FFFF95E2FEFF92E3FFFF89E5FFFF8DF6FFFF14388AFF2262C6FF1790
          FFFF0E84FBFF085BE3FFE6B877FFF1BA4AFFE5AD4558000000000000000051AC
          5CFFA1EACEFF3CDA93FF32D882FF34DB82FF35DD80FF37E482FF299391FF102A
          90FFA8F0FFFFA7ECFFFFB0F4FFFF4F9DD5FF1B4499FF163080FF2371D2FF36B8
          FFFF32B4FEFF33B7FFFF1774E7FFB1855B0E0000000000000000000000002C9B
          3B1A54B864FF9EEAB9FF289DC3FF4296E1FF2E73EDFF1C77D7FF206099FF1C3E
          9FFF245AB3FFB1FAFFFF76CCE9FF122F8CFF1B3D94FF18388CFF287BD4FF44C4
          FFFF3FBEFEFF41BFFFFF45CCFFFF001594460000000000000000000000000000
          000000000000187CB2C089D3FFFF37B4FFFF31AFFFFF34B3FFFF2782E7FF2045
          A5FF1E44A7FF163B9FFF173D9FFF1D45A0FF1E459EFF173996FF4FA7E5FF64D3
          FFFF4ACAFEFF4BCAFEFF52D4FFFF2F7ED7810000000000000000000000000000
          00000000000073BBFFF241BFFFFF39BBFDFF3CBCFDFF3DBDFEFF40C0FFFF2249
          B3FF214DB0FF214CAFFF214BACFF2149ACFF1F49B0FF20469FFFA2F6FFFF9EEB
          FFFF9AE4FFFF9AE5FFFFA6F8FFFF352D27A50000000000000000000000000000
          00000000000096D6FFFF77D9FFFF5ACFFEFF46C8FEFF48C8FEFF4DCEFFFF3EAC
          F0CC204BBB622350B870224EB42C214EB6692F426DC03C342DFF2E1D17FF7AB7
          D1FFAAF5FFFFACF8FFFF72A9C0FF302420CE0000000000000000000000000000
          0000000000007CA2B8FF9FF7FFFF9CEEFFFF9AE5FFFF86DFFEFF8EE8FFFF5B8D
          A9FF00000000000000000000000000000000473F307F443F3BFF403837FF4749
          47FF78AAB9FF63868FFF362824FF3B3633D00000000000000000000000000000
          000000000000352B26FF31211CFF46545AFFA3EFFFFFA7F0FFFFA8F8FFFF3837
          36FF332E29370000000000000000000000004D4442354D4743FF4A4442FF483F
          3EFF433935FF433936FF433E3BFF423C3A850000000000000000000000000000
          000000000000433E3CFF413B39FF3B2E2AFF77A9B9FF88C6D8FF484E52FF382F
          2CFF3B36343700000000000000000000000000000000514A4997514A49FF504A
          48FF4F4948F24E4745CC4B4543AF000000000000000000000000000000000000
          0000000000004D4743FC4A4442FF474140FF423835FF403631FF423B37FF423E
          3AFF000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000005149491C514A49FF504A48FF504948FF4E4847EF4D4744FB4A44
          425B000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000000000000000
          0000000000000000000000000000000000000000000000000000}
        TabOrder = 0
      end
      object sGroupBox2: TsGroupBox
        AlignWithMargins = True
        Left = 369
        Top = 0
        Width = 264
        Height = 42
        Align = alTop
        Caption = #1055#1086#1082#1072#1079#1099#1074#1072#1090#1100': '
        Font.Charset = DEFAULT_CHARSET
        Font.Color = clWindowText
        Font.Height = -11
        Font.Name = 'Tahoma'
        Font.Style = [fsBold]
        Padding.Left = 4
        ParentFont = False
        TabOrder = 1
        CaptionLayout = clTopCenter
        CaptionMargin.Left = 16
        SkinData.SkinSection = 'GROUPBOX'
        object RBActive: TsRadioButton
          Left = 66
          Top = 19
          Width = 71
          Height = 20
          Caption = #1040#1082#1090#1080#1074#1085#1099#1077
          Checked = True
          Font.Charset = DEFAULT_CHARSET
          Font.Color = clWindowText
          Font.Height = -11
          Font.Name = 'Tahoma'
          Font.Style = []
          ParentFont = False
          TabOrder = 0
          TabStop = True
          OnClick = RBActiveClick
          SkinData.SkinSection = 'CHECKBOX'
        end
        object RBAll: TsRadioButton
          Left = 7
          Top = 19
          Width = 37
          Height = 20
          Caption = #1042#1089#1077
          Font.Charset = DEFAULT_CHARSET
          Font.Color = clWindowText
          Font.Height = -11
          Font.Name = 'Tahoma'
          Font.Style = []
          ParentFont = False
          TabOrder = 1
          OnClick = RBAllClick
          SkinData.SkinSection = 'CHECKBOX'
        end
      end
    end
  end
  inherited Panel2: TPanel
    Top = 42
    Width = 810
    Height = 283
    Margins.Left = 4
    Margins.Top = 4
    Margins.Right = 4
    Margins.Bottom = 4
    ExplicitTop = 42
    ExplicitWidth = 810
    ExplicitHeight = 283
    inherited CRDBGrid1: TCRDBGrid
      Width = 808
      Height = 281
      Margins.Left = 4
      Margins.Top = 4
      Margins.Right = 4
      Margins.Bottom = 4
      OnDblClick = aShowGroupStatExecute
      OnKeyDown = nil
      Columns = <
        item
          Expanded = False
          FieldName = 'GROUP_ID'
          ReadOnly = True
          Title.Alignment = taCenter
          Title.Caption = #1050#1086#1076' '#1075#1088#1091#1087#1087#1099
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'MS Sans Serif'
          Title.Font.Style = [fsBold]
          Width = 82
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'GROUP_NAME'
          Title.Alignment = taCenter
          Title.Caption = #1043#1088#1091#1087#1087#1072
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'MS Sans Serif'
          Title.Font.Style = [fsBold]
          Width = 224
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'BALANCE'
          ReadOnly = True
          Title.Alignment = taCenter
          Title.Caption = #1041#1072#1083#1072#1085#1089
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'MS Sans Serif'
          Title.Font.Style = [fsBold]
          Width = 82
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'CNT'
          ReadOnly = True
          Title.Alignment = taCenter
          Title.Caption = #1050#1086#1083'-'#1074#1086' '#1085#1086#1084#1077#1088#1086#1074
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'MS Sans Serif'
          Title.Font.Style = [fsBold]
          Width = 99
          Visible = True
        end
        item
          Expanded = False
          FieldName = 'SIGN_NAME'
          Title.Alignment = taCenter
          Title.Caption = #1055#1088#1080#1079#1085#1072#1082' '#1102#1088'. '#1083#1080#1094#1072
          Title.Font.Charset = DEFAULT_CHARSET
          Title.Font.Color = clWindowText
          Title.Font.Height = -11
          Title.Font.Name = 'MS Sans Serif'
          Title.Font.Style = [fsBold]
          Width = 124
          Visible = True
        end>
    end
  end
  inherited qMain: TOraQuery
    UpdatingTable = 'CONTRACT_GROUPS'
    KeyFields = 'GROUP_ID'
    KeySequence = 'S_NEW_CONTRACT_GROUP_ID'
    SQLInsert.Strings = (
      'INSERT INTO CONTRACT_GROUPS'
      '  (GROUP_ID, GROUP_NAME, SIGN_ID)'
      'VALUES'
      '  (:GROUP_ID, :GROUP_NAME, :SIGN_ID)'
      'RETURNING'
      '  GROUP_ID, GROUP_NAME, SIGN_ID'
      'INTO'
      '  :GROUP_ID, :GROUP_NAME, :SIGN_ID')
    SQLDelete.Strings = (
      'DELETE FROM CONTRACT_GROUPS'
      'WHERE'
      '  GROUP_ID = :Old_GROUP_ID')
    SQLUpdate.Strings = (
      'UPDATE CONTRACT_GROUPS'
      'SET'
      
        '  GROUP_ID = :GROUP_ID, GROUP_NAME = :GROUP_NAME, SIGN_ID = :SIG' +
        'N_ID'
      'WHERE'
      '  GROUP_ID = :Old_GROUP_ID'
      'RETURNING'
      '  GROUP_ID, GROUP_NAME, SIGN_ID'
      'INTO'
      '  :GROUP_ID, :GROUP_NAME, :SIGN_ID')
    SQLLock.Strings = (
      'FOR UPDATE NOWAIT')
    SQLRefresh.Strings = ()
    SQL.Strings = (
      'SELECT g.group_id, g.group_name, '
      
        '       NVL(SUM(get_abonent_balance(c_b.phone_number_federal)),0)' +
        ' balance,'
      '       COUNT(C_B.CONTRACT_ID) cnt,'
      '       G.SIGN_ID'
      'FROM CONTRACT_GROUPS g,contracts c_b')
    IndexFieldNames = 'GROUP_ID'
    BeforeOpen = qMainBeforeOpen
    Top = 57
    object qMainGROUP_ID: TFloatField
      FieldName = 'GROUP_ID'
      Required = True
    end
    object qMainGROUP_NAME: TStringField
      FieldName = 'GROUP_NAME'
      Size = 880
    end
    object qMainBALANCE: TFloatField
      FieldName = 'BALANCE'
    end
    object qMainCNT: TFloatField
      FieldName = 'CNT'
    end
    object qMainSIGN_ID: TFloatField
      FieldName = 'SIGN_ID'
    end
    object qMainSIGN_NAME: TStringField
      FieldKind = fkLookup
      FieldName = 'SIGN_NAME'
      LookupDataSet = qGROUPS_SIGN
      LookupKeyFields = 'SIGN_ID'
      LookupResultField = 'SIGN_NAME'
      KeyFields = 'SIGN_ID'
      Lookup = True
    end
  end
  inherited DataSource1: TDataSource
    Left = 400
    Top = 97
  end
  inherited PopupMenu1: TPopupMenu
    object Oracle1: TMenuItem
      Action = aShowGroupStat
    end
  end
  inherited ActionList1: TActionList
    Left = 328
    object aShowGroupStat: TAction
      Caption = #1048#1085#1092#1086#1088#1084#1072#1094#1080#1103' '#1086' '#1075#1088#1091#1087#1087#1077
      OnExecute = aShowGroupStatExecute
    end
  end
  inherited qGetNewId: TOraStoredProc
    CommandStoredProcName = 'NEW_DOCUM_TYPE_ID:0'
  end
  object qGROUPS_SIGN: TOraQuery
    SQL.Strings = (
      'select GS.SIGN_ID, '
      '       GS.SIGN_NAME '
      'from GROUPS_SIGN GS')
    Left = 464
    Top = 128
  end
  object qUserCheckAllow: TOraQuery
    SQL.Strings = (
      'SELECT ORGANIZATION_ID FROM user_names'
      'WHERE UPPER(user_name) = UPPER(:user_name)')
    Left = 472
    Top = 192
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'user_name'
      end>
  end
  object qMainCopy: TOraQuery
    UpdatingTable = 'CONTRACT_GROUPS'
    KeyFields = 'GROUP_ID'
    KeySequence = 'S_NEW_CONTRACT_GROUP_ID'
    SQLInsert.Strings = (
      'INSERT INTO CONTRACT_GROUPS'
      '  (GROUP_ID, GROUP_NAME, SIGN_ID)'
      'VALUES'
      '  (:GROUP_ID, :GROUP_NAME, :SIGN_ID)'
      'RETURNING'
      '  GROUP_ID, GROUP_NAME, SIGN_ID'
      'INTO'
      '  :GROUP_ID, :GROUP_NAME, :SIGN_ID')
    SQLDelete.Strings = (
      'DELETE FROM CONTRACT_GROUPS'
      'WHERE'
      '  GROUP_ID = :Old_GROUP_ID')
    SQLUpdate.Strings = (
      'UPDATE CONTRACT_GROUPS'
      'SET'
      
        '  GROUP_ID = :GROUP_ID, GROUP_NAME = :GROUP_NAME, SIGN_ID = :SIG' +
        'N_ID'
      'WHERE'
      '  GROUP_ID = :Old_GROUP_ID'
      'RETURNING'
      '  GROUP_ID, GROUP_NAME, SIGN_ID'
      'INTO'
      '  :GROUP_ID, :GROUP_NAME, :SIGN_ID')
    SQLLock.Strings = (
      'FOR UPDATE NOWAIT')
    SQLRefresh.Strings = (
      'SELECT g.group_id, g.group_name, '
      
        '       NVL(SUM(get_abonent_balance(c_b.phone_number_federal)),0)' +
        ' balance,'
      '       COUNT(C_B.CONTRACT_ID) cnt,'
      '       G.SIGN_ID'
      'FROM CONTRACT_GROUPS g,contracts c_b'
      'WHERE c_b.group_id = g.group_id '
      
        'and not exists (select 1 from CONTRACT_CANCELS cc where CC.CONTR' +
        'ACT_ID = C_B.CONTRACT_ID)'
      'and G.GROUP_ID = :GROUP_ID'
      'group by g.group_id, g.group_name, G.SIGN_ID')
    Session = Dm.OraSession
    SQL.Strings = (
      'SELECT g.group_id, g.group_name, '
      
        '       NVL(SUM(get_abonent_balance(c_b.phone_number_federal)),0)' +
        ' balance,'
      '       COUNT(C_B.CONTRACT_ID) cnt,'
      '       G.SIGN_ID'
      'FROM CONTRACT_GROUPS g,contracts c_b')
    RefreshOptions = [roAfterInsert, roAfterUpdate]
    IndexFieldNames = 'GROUP_ID'
    BeforeOpen = qMainBeforeOpen
    BeforePost = qMainBeforePost
    Left = 264
    Top = 169
    object FloatField1: TFloatField
      FieldName = 'GROUP_ID'
      Required = True
    end
    object StringField1: TStringField
      FieldName = 'GROUP_NAME'
      Size = 880
    end
    object FloatField2: TFloatField
      FieldName = 'BALANCE'
    end
    object FloatField3: TFloatField
      FieldName = 'CNT'
    end
    object FloatField4: TFloatField
      FieldName = 'SIGN_ID'
    end
    object StringField2: TStringField
      FieldKind = fkLookup
      FieldName = 'SIGN_NAME'
      LookupDataSet = qGROUPS_SIGN
      LookupKeyFields = 'SIGN_ID'
      LookupResultField = 'SIGN_NAME'
      KeyFields = 'SIGN_ID'
      Lookup = True
    end
  end
end
