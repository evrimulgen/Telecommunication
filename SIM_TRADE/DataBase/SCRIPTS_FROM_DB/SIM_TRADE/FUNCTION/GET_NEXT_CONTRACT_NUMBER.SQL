
  CREATE OR REPLACE FUNCTION "SIM_TRADE"."GET_NEXT_CONTRACT_NUMBER" RETURN VARCHAR2 IS
--#Version=1
-- Функция возвращает следующий номер договора льготного рецепта, 
-- проверяя его на дублирование.
BEGIN
  RETURN AUTO_NUMERATION2.GET_NEXT_SEQUENCE_VALUE('CONTRACT_NUM', 
    'SELECT 1 FROM CONTRACTS WHERE CONTRACT_NUM=:NUM');
END GET_NEXT_CONTRACT_NUMBER; 